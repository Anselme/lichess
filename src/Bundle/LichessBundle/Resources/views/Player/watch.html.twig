{% extends "LichessBundle:Player:layoutPlayer.html.twig" %}
{% block title_suffix %} #{{ game.id }} as {{ player.color }}{% endblock %}
{% block content %}
{% endblock %}
{% block js_data %}
    {{ lichess_game_watch_data(player, possibleMoves)|raw }}
{% endblock %}
{% block goodies %}
<div class="lichess_goodies">
    <br />
    {% trans "You are viewing this game as a spectator" %}.
    <br /><br /><br />
    <div class="box">
        {% if game.isBeingPlayed %}
            {% trans "Playing right now" %}
        {% else %}
            {{ lichess_date(game.updatedAt) }}
        {% endif %}
        <br /><br />
        {% for p in [player.opponent, player] %}
            <div>
                {% if p.isAi %}
                    {% trans "%ai_name% level %ai_level%" with {'%ai_name%': 'Crafty A.I.', '%ai_level%': p.aiLevel} %}
                {% else %}
                    {{ lichess_link_player(p)|raw }}
                {% endif %}
            </div>
        {% endfor %}
        <br />
        {% trans "Variant" %}: {{ game.variantName|capitalize }}<br /><br />
        {% trans "Time control" %}: {{ game.clockName }}<br /><br />
        {% if game.isRated %}
            {% trans "This game is rated" %}<br />
        {% endif %}
    </div>
    <br /><br />
    <a class="rotate_board" href="{{ path("lichess_game", {"id": game.id, "color": player.opponent.color} ) }}">{% trans "Flip board" %}</a>
    <br /><br />
    <a class="lichess_replay_link" href="{{ path("lichess_pgn_viewer", {"id": game.id, "color": player.color} ) }}">{% trans "Replay and analyse" %}</a>
    <br /><br />
    <a href="{{ path("lichess_homepage") }}"><strong>{% trans "Play a new game" %}</strong></a>
</div>
{% endblock %}
{% block menu_active %}game{% endblock %}
{% block comments %}
{% render "FOSCommentBundle:Thread:show" with {"identifier": "game:" ~ player.game.id} %}
{% endblock %}
